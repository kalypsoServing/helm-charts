mimir-distributed:
  enabled: true
  
  # Disable internal components
  minio:
    enabled: false
  
  kafka:
    enabled: false
  
  # Mimir configuration
  mimir:
    structuredConfig:
      common:
        storage:
          backend: s3
          s3:
            endpoint: kalypso-minio.minio.svc.cluster.local:9000
            access_key_id: "rootuser"
            secret_access_key: "rootpass123"
            insecure: true
      
      blocks_storage:
        backend: s3
        s3:
          endpoint: minio.minio.svc.cluster.local:9000
          bucket_name: mimir-blocks
          insecure: true
      
      alertmanager_storage:
        backend: s3
        s3:
          endpoint: minio.minio.svc.cluster.local:9000
          bucket_name: mimir-alertmanager
          insecure: true
          access_key_id: "rootuser"
          secret_access_key: "rootpass123"
      
      ruler_storage:
        backend: s3
        s3:
          endpoint: minio.minio.svc.cluster.local:9000
          bucket_name: mimir-ruler
          insecure: true
          access_key_id: "rootuser"
          secret_access_key: "rootpass123"
      
      # Ring configuration (memberlist)
      distributor:
        ring:
          kvstore:
            store: memberlist
      ingester:
        ring:
          kvstore:
            store: memberlist
      alertmanager:
        sharding_ring:
          kvstore:
            store: memberlist
      compactor:
        sharding_ring:
          kvstore:
            store: memberlist
      store_gateway:
        sharding_ring:
          kvstore:
            store: memberlist
  
  # Component replicas (development)
  ingester:
    replicas: 1
    zoneAwareReplication:
      enabled: false
    resources:
      requests:
        cpu: 50m
        memory: 256Mi
  
  distributor:
    replicas: 1
    resources:
      requests:
        cpu: 20m
        memory: 64Mi
  
  querier:
    replicas: 1
    resources:
      requests:
        cpu: 20m
        memory: 64Mi
  
  query_frontend:
    replicas: 1
    resources:
      requests:
        cpu: 10m
        memory: 32Mi
  
  store_gateway:
    replicas: 1
    zoneAwareReplication:
      enabled: false
    resources:
      requests:
        cpu: 10m
        memory: 64Mi
  
  alertmanager:
    replicas: 1
    zoneAwareReplication:
      enabled: false
    resources:
      requests:
        cpu: 10m
        memory: 32Mi
  
  compactor:
    enabled: true
    replicas: 1
  
  # Disable test components
  smoke_test:
    enabled: false
  continuous_test:
    enabled: false
  rollout_operator:
    enabled: false
